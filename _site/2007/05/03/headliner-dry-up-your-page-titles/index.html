<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>the.rails.ist @ Headliner: DRY up your page titles</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>


<h1>Headliner: DRY up your page titles</h1>

<div id="post">
<p>Normally, if your Rails application has lots of actions and a shared layout, you might find yourself setting custom page title names in your controllers.</p>

<p>Here's an example:</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nc">PagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">about</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">&quot;About us&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
</div>


<p>Then, in your main layout, you might have something like this:</p>

<div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>My website<span class="err">&lt;</span>% if @title %&gt;: <span class="err">&lt;</span>%= @title %&gt;<span class="err">&lt;</span>% end %&gt;<span class="nt">&lt;/title&gt;</span>
<span class="err">&lt;</span>/head
</pre>
</div>


<p>This works okay... but page titles don't really belong in controllers, do they?</p>

<p>So, by moving these titles into your views, we can DRY things up a bit and reinforce the MVC design pattern that's so fundamental to Ruby on Rails.</p>

<h2>Usage</h2>


<p>First, add this code to your main layout:</p>

<div class="highlight"><pre><span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sx">%= title :site =</span><span class="o">&gt;</span> <span class="s2">&quot;My website&quot;</span> <span class="sx">%&gt;</span>
<span class="sx">&lt;/head&gt;</span>
</pre>
</div>


<p>Then, to set the page title, add this to each of your views:</p>

<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="err">&lt;</span>%= title &quot;My page title&quot; %&gt;<span class="nt">&lt;/h1&gt;</span>
</pre>
</div>


<p>When views are rendered, the page title will be included in the right spots:</p>

<div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>My website | My page title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>My page title<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre>
</div>


<h2>Options</h2>


<p>Use these options to customize the title format:</p>

<ul>
<li>:prefix (text between site name and separator)</li>
<li>:separator (text used to separate website name from page title)</li>
<li>:suffix (text between separator and page title)</li>
<li>:lowercase (when true, the page name will be lowercase)</li>
<li>:reverse (when true, the page and site names will be reversed)</li>
</ul>


<p>And here are a few examples to give you ideas.</p>

<div class="highlight"><pre><span class="o">&lt;</span><span class="sx">%= title :separator =</span><span class="o">&gt;</span> <span class="s2">&quot;&amp;mdash;&quot;</span> <span class="sx">%&gt;</span>
<span class="sx">&lt;%= title :prefix =&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="ss">:separator</span> <span class="o">=&gt;</span> <span class="s2">&quot;:&quot;</span> <span class="sx">%&gt;</span>
<span class="sx">&lt;%= title :lowercase =&gt;</span> <span class="kp">true</span> <span class="sx">%&gt;</span>
<span class="sx">&lt;%= title :reverse =&gt;</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">:prefix</span> <span class="o">=&gt;</span> <span class="kp">false</span> <span class="o">%&gt;</span>
</pre>
</div>


<h2>Dealing with special pages</h2>


<p>How do you set the page title without showing it in the view?</p>

<div class="highlight"><pre><span class="o">&lt;</span><span class="sx">% title </span><span class="s2">&quot;My page title&quot;</span> <span class="o">%&gt;</span>
</pre>
</div>


<p>What if your view headline is different from your page title?</p>

<div class="highlight"><pre><span class="o">&lt;%=</span> <span class="n">title</span> <span class="s2">&quot;My page title&quot;</span><span class="p">,</span> <span class="s2">&quot;My headline&quot;</span> <span class="o">%&gt;</span>
</pre>
</div>


<h2>Mr. T says, &#8216;Use my method, fool!&#8217;</h2>


<p>Just like ERB's <a href="http://www.ruby-doc.org/stdlib/libdoc/erb/rdoc/">HTML safe method</a>, you can invoke Headliner with a single letter alias.</p>

<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="err">&lt;</span>%=t &quot;My page title&quot; %&gt;<span class="nt">&lt;/h1&gt;</span>
</pre>
</div>


<h2>How does it work?</h2>


<p>Ruby on Rails renders actions <em>before</em> inserting them into layouts. So, if you set a variable in your view, it will be accessible in your layout. But, at first glance, it looks like you're using a variable (in the head) before it's been assigned a value (in the body). Cool, huh?</p>

<h2>Credits</h2>


<p>Special thanks to Nick Zadrozny and Jordan Fowler for their input.</p>

<h2>Install</h2>


<div class="highlight"><pre>script/plugin install git://github.com/mokolabs/headliner.git
</pre>
</div>


</div>


</body>
</html>