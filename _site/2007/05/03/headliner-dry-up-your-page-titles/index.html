<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>the.rails.ist => Headliner: DRY up your page titles</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="/javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="/javascripts/app.js" type="text/javascript"></script>
<link href="/images/favicon.png" rel="shortcut icon" />
<link rel="stylesheet" href="/stylesheets/app.css" type="text/css" />
<link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" />
</head>
<body>

<div id="page">

<div id="header">
<a href="/">the.railsi.st</a>
</div>

<div id="content">

<div id="sidebar">
<h2>About</h2>

<p>the.railsi.st is <a href="http://mokolabs.com">Patrick Crowley</a>.</p>

<p>I'm a Rails developer and this blog is a record of my experiences using Ruby on Rails to build web apps.</p>

<p>I also run <a href="http://sdruby.org">SD Ruby</a>, a local Ruby group in San Diego known for its <a href="http://sdruby.org/podcast">podcast</a>.</p>

<h2>Plugins</h2>

<ul>
<li><a href="/2007/08/22/javascripter-organize-your-javascript">Javascripter</a> - Organize your .js</li>
<li><a href="/2007/05/03/headliner-dry-up-your-page-titles">Headliner</a> - DRY up page titles</li>
<li><a href="/2007/05/03/styler-stylesheets-made-easy">Styler</a> - Stylesheets made easy</li>
</ul>

<h2>Podcasts</h2>

<p>I've given several talks about Rails.</p>

<ul id="podcasts">
<li><a href="http://sdruby.org/podcast/54"><img src="/images/podcast/7.gif" width="36" height="28" alt="Paperclip" /></a><span><a href="http://sdruby.org/podcast/54">Paperclip</a></span></li>
<li><a href="http://sdruby.org/podcast/38"><img src="/images/podcast/6.gif" width="36" height="28" alt="Headliner &amp; Styler" /></a><span><a href="http://sdruby.org/podcast/38">Haml &amp; Sass</a></span></li>
<li><a href="http://sdruby.org/podcast/27"><img src="/images/podcast/5.gif" width="36" height="28" alt="Headliner &amp; Styler" /></a><span><a href="http://sdruby.org/podcast/27">Headliner &amp; Styler</a></span></li>
<li><a href="http://sdruby.org/podcast/15"><img src="/images/podcast/4.gif" width="36" height="28" alt="Rails for Legacy apps" /></a><span><a href="http://sdruby.org/podcast/15">Rails for Legacy apps</a></span></li>
<li><a href="http://sdruby.org/podcast/17"><img src="/images/podcast/3.gif" width="36" height="27" alt="ActsNaked" /></a><span><a href="http://sdruby.org/podcast/17">ActsNaked</a></span></li>
<li><a href="http://sdruby.org/podcast/11"><img src="/images/podcast/2.gif" width="36" height="28" alt="ActsAsTaggable" /></a><span><a href="http://sdruby.org/podcast/11">ActsAsTaggable</a></span></li>
<li><a href="http://sdruby.org/podcast/1"><img src="/images/podcast/1.gif" width="36" height="28" alt="Summer of Rails" /></a><span><a href="http://sdruby.org/podcast/1">Summer of Rails</a></span></li>
</ul>

<h2>Recent work</h2>

<ul>
<li><a href="http://chumby.com">Chumby</a></li>
<li><a href="http://roxy.cinematreasures.org">Roxy</a></li>
<li><a href="http://graffletopia.com">Graffletopia</a></li>
<li><a href="http://sdruby.org">SD Ruby</a></li>
<li><a href="http://summerofrails.org">Summer of Rails</a></li>
</ul>

<h2>Consulting</h2>

<p>I'm available for freelance.</p>

<p id="merbcamp"><a href="http://merbcamp.com"><img src="/images/merbcamp.gif" width="200" height="115" alt="I'm attending MerbCamp" /></a></p>

<p id="wwr"><a href="http://www.workingwithrails.com/recommendation/new/person/5945-patrick-crowley"><img src="/images/wwr.gif" /></a></p>

<p id="feedburner"><a href="http://feeds.feedburner.com/therailsist"><img src="http://feeds.feedburner.com/~fc/therailsist?bg=7a0008&amp;fg=ffffff&amp;anim=0" height="26" width="88" style="border:0" alt="Subscribe" /></a></p>
</div>

<div id="primary">

<h1>Headliner: DRY up your page titles</h1>

<div id="post">
<p>Normally, if your Rails application has lots of actions and a shared layout, you might find yourself setting custom page title names in your controllers.</p>

<p>Here's an example:</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nc">PagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">about</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">&quot;About us&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
</div>


<p>Then, in your main layout, you might have something like this:</p>

<div class="highlight"><pre><span class="x">&lt;head&gt;</span>
<span class="x">&lt;title&gt;My website</span><span class="cp">&lt;%</span> <span class="k">if</span> <span class="vi">@title</span> <span class="cp">%&gt;</span><span class="x">: </span><span class="cp">&lt;%=</span> <span class="vi">@title</span> <span class="cp">%&gt;&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">&lt;/head</span>
</pre>
</div>


<p>This works okay... but page titles don't really belong in controllers, do they?</p>

<p>So, by moving these titles into your views, we can DRY things up a bit and reinforce the MVC design pattern that's so fundamental to Ruby on Rails.</p>

<h2>Usage</h2>


<p>First, add this code to your main layout:</p>

<div class="highlight"><pre><span class="x">&lt;head&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">title</span> <span class="ss">:site</span> <span class="o">=&gt;</span> <span class="s2">&quot;My website&quot;</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;/head&gt;</span>
</pre>
</div>


<p>Then, to set the page title, add this to each of your views:</p>

<div class="highlight"><pre><span class="x">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="s2">&quot;My page title&quot;</span> <span class="cp">%&gt;</span><span class="x">&lt;/h1&gt;</span>
</pre>
</div>


<p>When views are rendered, the page title will be included in the right spots:</p>

<div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>My website | My page title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>My page title<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre>
</div>


<h2>Options</h2>


<p>Use these options to customize the title format:</p>

<ul>
<li>:prefix (text between site name and separator)</li>
<li>:separator (text used to separate website name from page title)</li>
<li>:suffix (text between separator and page title)</li>
<li>:lowercase (when true, the page name will be lowercase)</li>
<li>:reverse (when true, the page and site names will be reversed)</li>
</ul>


<p>And here are a few examples to give you ideas.</p>

<div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="ss">:separator</span> <span class="o">=&gt;</span> <span class="s2">&quot;&amp;mdash;&quot;</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%=</span> <span class="n">title</span> <span class="ss">:prefix</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="ss">:separator</span> <span class="o">=&gt;</span> <span class="s2">&quot;:&quot;</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%=</span> <span class="n">title</span> <span class="ss">:lowercase</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%=</span> <span class="n">title</span> <span class="ss">:reverse</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">:prefix</span> <span class="o">=&gt;</span> <span class="kp">false</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre>
</div>


<h2>Dealing with special pages</h2>


<p>How do you set the page title without showing it in the view?</p>

<div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">title</span> <span class="s2">&quot;My page title&quot;</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre>
</div>


<p>What if your view headline is different from your page title?</p>

<div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="s2">&quot;My page title&quot;</span><span class="p">,</span> <span class="s2">&quot;My headline&quot;</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre>
</div>


<h2>Mr. T says, &#8216;Use my method, fool!&#8217;</h2>


<p>Just like ERB's <a href="http://www.ruby-doc.org/stdlib/libdoc/erb/rdoc/">HTML safe method</a>, you can invoke Headliner with a single letter alias.</p>

<div class="highlight"><pre><span class="x">&lt;h1&gt;</span><span class="cp">&lt;%=</span><span class="n">t</span> <span class="s2">&quot;My page title&quot;</span> <span class="cp">%&gt;</span><span class="x">&lt;/h1&gt;</span>
</pre>
</div>


<h2>How does it work?</h2>


<p>Ruby on Rails renders actions <em>before</em> inserting them into layouts. So, if you set a variable in your view, it will be accessible in your layout. But, at first glance, it looks like you're using a variable (in the head) before it's been assigned a value (in the body). Cool, huh?</p>

<h2>Credits</h2>


<p>Special thanks to Nick Zadrozny and Jordan Fowler for their input.</p>

<h2>Install</h2>


<div class="highlight"><pre>script/plugin install git://github.com/mokolabs/headliner.git
</pre>
</div>


</div>


</div>

</div>

</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-421670-4");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>
</html>